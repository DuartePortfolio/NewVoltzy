{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport { BASE_URL } from \"../backend/config\";\nimport { getToken } from \"../backend/token\";\nvar ApiClient = function () {\n  function ApiClient(baseUrl) {\n    _classCallCheck(this, ApiClient);\n    this.baseUrl = baseUrl;\n  }\n  return _createClass(ApiClient, [{\n    key: \"getHeaders\",\n    value: function () {\n      var _getHeaders = _asyncToGenerator(function* () {\n        var headers = {\n          'Content-Type': 'application/json'\n        };\n        var token = yield getToken();\n        if (token) {\n          headers['Authorization'] = \"Bearer \" + token;\n        }\n        return headers;\n      });\n      function getHeaders() {\n        return _getHeaders.apply(this, arguments);\n      }\n      return getHeaders;\n    }()\n  }, {\n    key: \"get\",\n    value: function () {\n      var _get = _asyncToGenerator(function* (path) {\n        var headers = yield this.getHeaders();\n        var response = yield fetch(\"\" + this.baseUrl + path, {\n          method: 'GET',\n          headers: headers\n        });\n        return this.handleResponse(response);\n      });\n      function get(_x) {\n        return _get.apply(this, arguments);\n      }\n      return get;\n    }()\n  }, {\n    key: \"post\",\n    value: function () {\n      var _post = _asyncToGenerator(function* (path, body) {\n        var headers = yield this.getHeaders();\n        var response = yield fetch(\"\" + this.baseUrl + path, {\n          method: 'POST',\n          headers: headers,\n          body: JSON.stringify(body)\n        });\n        return this.handleResponse(response);\n      });\n      function post(_x2, _x3) {\n        return _post.apply(this, arguments);\n      }\n      return post;\n    }()\n  }, {\n    key: \"put\",\n    value: function () {\n      var _put = _asyncToGenerator(function* (path, body) {\n        var headers = yield this.getHeaders();\n        var response = yield fetch(\"\" + this.baseUrl + path, {\n          method: 'PUT',\n          headers: headers,\n          body: JSON.stringify(body)\n        });\n        return this.handleResponse(response);\n      });\n      function put(_x4, _x5) {\n        return _put.apply(this, arguments);\n      }\n      return put;\n    }()\n  }, {\n    key: \"delete\",\n    value: function () {\n      var _delete2 = _asyncToGenerator(function* (path) {\n        var headers = yield this.getHeaders();\n        var response = yield fetch(\"\" + this.baseUrl + path, {\n          method: 'DELETE',\n          headers: headers\n        });\n        return this.handleResponse(response);\n      });\n      function _delete(_x6) {\n        return _delete2.apply(this, arguments);\n      }\n      return _delete;\n    }()\n  }, {\n    key: \"handleResponse\",\n    value: function () {\n      var _handleResponse = _asyncToGenerator(function* (response) {\n        var text = yield response.text();\n        var data = null;\n        try {\n          data = text ? JSON.parse(text) : null;\n        } catch (e) {\n          data = {\n            message: text\n          };\n        }\n        if (!response.ok) {\n          var _data;\n          var message = ((_data = data) == null ? void 0 : _data.message) || response.statusText || 'Request failed';\n          throw new Error(message);\n        }\n        return data;\n      });\n      function handleResponse(_x7) {\n        return _handleResponse.apply(this, arguments);\n      }\n      return handleResponse;\n    }()\n  }]);\n}();\nexport var apiClient = new ApiClient(BASE_URL);","map":{"version":3,"names":["BASE_URL","getToken","ApiClient","baseUrl","_classCallCheck","_createClass","key","value","_getHeaders","_asyncToGenerator","headers","token","getHeaders","apply","arguments","_get","path","response","fetch","method","handleResponse","get","_x","_post","body","JSON","stringify","post","_x2","_x3","_put","put","_x4","_x5","_delete2","delete","_x6","_handleResponse","text","data","parse","e","message","ok","_data","statusText","Error","_x7","apiClient"],"sources":["C:/Users/Seele/Documents/ESMAD/Computação Móvel e Ubíqua/New Voltzy/NewVoltzy/src/services/api.ts"],"sourcesContent":["import { BASE_URL } from '../backend/config';\r\nimport { getToken } from '../backend/token';\r\n\r\nexport interface ApiResponse<T = any> {\r\n  data?: T;\r\n  message?: string;\r\n  error?: string;\r\n}\r\n\r\nclass ApiClient {\r\n  private baseUrl: string;\r\n\r\n  constructor(baseUrl: string) {\r\n    this.baseUrl = baseUrl;\r\n  }\r\n\r\n  private async getHeaders(): Promise<Record<string, string>> {\r\n    const headers: Record<string, string> = {\r\n      'Content-Type': 'application/json',\r\n    };\r\n\r\n    const token = await getToken();\r\n    if (token) {\r\n      headers['Authorization'] = `Bearer ${token}`;\r\n    }\r\n\r\n    return headers;\r\n  }\r\n\r\n  async get<T = any>(path: string): Promise<T> {\r\n    const headers = await this.getHeaders();\r\n    const response = await fetch(`${this.baseUrl}${path}`, {\r\n      method: 'GET',\r\n      headers,\r\n    });\r\n\r\n    return this.handleResponse<T>(response);\r\n  }\r\n\r\n  async post<T = any>(path: string, body: any): Promise<T> {\r\n    const headers = await this.getHeaders();\r\n    const response = await fetch(`${this.baseUrl}${path}`, {\r\n      method: 'POST',\r\n      headers,\r\n      body: JSON.stringify(body),\r\n    });\r\n\r\n    return this.handleResponse<T>(response);\r\n  }\r\n\r\n  async put<T = any>(path: string, body: any): Promise<T> {\r\n    const headers = await this.getHeaders();\r\n    const response = await fetch(`${this.baseUrl}${path}`, {\r\n      method: 'PUT',\r\n      headers,\r\n      body: JSON.stringify(body),\r\n    });\r\n\r\n    return this.handleResponse<T>(response);\r\n  }\r\n\r\n  async delete<T = any>(path: string): Promise<T> {\r\n    const headers = await this.getHeaders();\r\n    const response = await fetch(`${this.baseUrl}${path}`, {\r\n      method: 'DELETE',\r\n      headers,\r\n    });\r\n\r\n    return this.handleResponse<T>(response);\r\n  }\r\n\r\n  private async handleResponse<T>(response: Response): Promise<T> {\r\n    const text = await response.text();\r\n    let data: any = null;\r\n\r\n    try {\r\n      data = text ? JSON.parse(text) : null;\r\n    } catch (e) {\r\n      data = { message: text };\r\n    }\r\n\r\n    if (!response.ok) {\r\n      const message = data?.message || response.statusText || 'Request failed';\r\n      throw new Error(message);\r\n    }\r\n\r\n    return data as T;\r\n  }\r\n}\r\n\r\nexport const apiClient = new ApiClient(BASE_URL);\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}