{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nimport React, { useState, useEffect } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport Switch from \"react-native-web/dist/exports/Switch\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport Svg, { Path, Defs, LinearGradient as SvgLinearGradient, Stop } from 'react-native-svg';\nimport { LinearGradient } from 'expo-linear-gradient';\nimport { PROFILE_PLACEHOLDER } from \"../data/mockData\";\nimport styles from \"../styles/dashboardStyles\";\nimport { energyService } from \"../services/energyService\";\nimport { lightsService } from \"../services/lightsService\";\nimport { routinesService } from \"../services/routinesService\";\nimport { useApp } from \"../contexts/AppContext\";\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nvar DashboardScreen = function DashboardScreen() {\n  var _useApp = useApp(),\n    currentHouse = _useApp.currentHouse;\n  var _useState = useState([]),\n    _useState2 = _slicedToArray(_useState, 2),\n    lights = _useState2[0],\n    setLights = _useState2[1];\n  var _useState3 = useState(null),\n    _useState4 = _slicedToArray(_useState3, 2),\n    energyStats = _useState4[0],\n    setEnergyStats = _useState4[1];\n  var _useState5 = useState([]),\n    _useState6 = _slicedToArray(_useState5, 2),\n    hourlyData = _useState6[0],\n    setHourlyData = _useState6[1];\n  var _useState7 = useState([]),\n    _useState8 = _slicedToArray(_useState7, 2),\n    routines = _useState8[0],\n    setRoutines = _useState8[1];\n  var _useState9 = useState(null),\n    _useState0 = _slicedToArray(_useState9, 2),\n    activeRoutine = _useState0[0],\n    setActiveRoutine = _useState0[1];\n  var _useState1 = useState(true),\n    _useState10 = _slicedToArray(_useState1, 2),\n    loading = _useState10[0],\n    setLoading = _useState10[1];\n  useEffect(function () {\n    loadDashboardData();\n  }, [currentHouse]);\n  var loadDashboardData = function () {\n    var _ref = _asyncToGenerator(function* () {\n      if (!currentHouse) return;\n      try {\n        setLoading(true);\n        var _yield$Promise$all = yield Promise.all([energyService.getCurrentStats(currentHouse.id), energyService.getHourlyConsumption(currentHouse.id), lightsService.getLightsByHouse(currentHouse.id), routinesService.getRoutinesByHouse(currentHouse.id)]),\n          _yield$Promise$all2 = _slicedToArray(_yield$Promise$all, 4),\n          statsData = _yield$Promise$all2[0],\n          hourlyDataResult = _yield$Promise$all2[1],\n          lightsData = _yield$Promise$all2[2],\n          routinesData = _yield$Promise$all2[3];\n        setEnergyStats(statsData);\n        setHourlyData(hourlyDataResult);\n        setLights(lightsData);\n        setRoutines(routinesData);\n      } catch (error) {\n        console.error('Failed to load dashboard data:', error);\n        Alert.alert('Error', 'Failed to load dashboard data');\n      } finally {\n        setLoading(false);\n      }\n    });\n    return function loadDashboardData() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n  var toggleLight = function () {\n    var _ref2 = _asyncToGenerator(function* (lightId) {\n      try {\n        var light = lights.find(function (l) {\n          return l.id === lightId;\n        });\n        if (!light) return;\n        yield lightsService.toggleLight(lightId);\n        setLights(lights.map(function (l) {\n          return l.id === lightId ? _objectSpread(_objectSpread({}, l), {}, {\n            is_on: !l.is_on\n          }) : l;\n        }));\n        if (currentHouse) {\n          var statsData = yield energyService.getCurrentStats(currentHouse.id);\n          setEnergyStats(statsData);\n        }\n      } catch (error) {\n        console.error('Failed to toggle light:', error);\n        Alert.alert('Error', 'Failed to toggle light');\n      }\n    });\n    return function toggleLight(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  if (loading) {\n    return _jsx(LinearGradient, {\n      colors: ['#78B85E', '#1E7B45'],\n      style: styles.container,\n      children: _jsx(View, {\n        style: {\n          flex: 1,\n          justifyContent: 'center',\n          alignItems: 'center'\n        },\n        children: _jsx(ActivityIndicator, {\n          size: \"large\",\n          color: \"#FFFFFF\"\n        })\n      })\n    });\n  }\n  return _jsx(LinearGradient, {\n    colors: ['#78B85E', '#1E7B45'],\n    style: styles.container,\n    children: _jsxs(ScrollView, {\n      contentContainerStyle: styles.scrollContent,\n      children: [_jsxs(View, {\n        style: styles.blobContainer,\n        children: [_jsx(View, {\n          style: [styles.blob, {\n            top: 100,\n            left: -50\n          }]\n        }), _jsx(View, {\n          style: [styles.blob, {\n            top: 300,\n            right: -30\n          }]\n        }), _jsx(View, {\n          style: [styles.blob, {\n            bottom: 100,\n            left: 20\n          }]\n        })]\n      }), _jsxs(View, {\n        style: styles.glassHeader,\n        children: [_jsxs(View, {\n          style: styles.headerContent,\n          children: [_jsx(Svg, {\n            width: 47,\n            height: 47,\n            viewBox: \"0 0 47 47\",\n            fill: \"none\",\n            children: _jsx(Path, {\n              d: \"M17.625 43.0832V23.4998H29.375V43.0832M5.875 17.6248L23.5 3.9165L41.125 17.6248V39.1665C41.125 40.2053 40.7124 41.2015 39.9778 41.936C39.2433 42.6705 38.2471 43.0832 37.2083 43.0832H9.79167C8.7529 43.0832 7.75668 42.6705 7.02216 41.936C6.28765 41.2015 5.875 40.2053 5.875 39.1665V17.6248Z\",\n              stroke: \"#F3F3F3\",\n              strokeWidth: \"2\",\n              strokeLinecap: \"round\",\n              strokeLinejoin: \"round\"\n            })\n          }), _jsxs(View, {\n            style: styles.titleContainer,\n            children: [_jsx(Text, {\n              style: styles.headerTitle,\n              children: \"Dashboard\"\n            }), _jsx(View, {\n              style: styles.divider\n            })]\n          }), _jsx(View, {\n            style: styles.profilePicture,\n            children: _jsx(Image, {\n              source: {\n                uri: PROFILE_PLACEHOLDER\n              },\n              style: styles.profileImage\n            })\n          })]\n        }), _jsx(Text, {\n          style: styles.houseId,\n          children: \"House 1\"\n        })]\n      }), _jsxs(View, {\n        style: styles.statsSection,\n        children: [_jsxs(View, {\n          style: styles.statCard,\n          children: [_jsx(Text, {\n            style: styles.statLabel,\n            children: \"Lights on\"\n          }), _jsx(Text, {\n            style: styles.statValue,\n            children: (energyStats == null ? void 0 : energyStats.lights_on) || 0\n          })]\n        }), _jsxs(View, {\n          style: styles.statCard,\n          children: [_jsx(Text, {\n            style: styles.statLabel,\n            children: \"Energy Used\"\n          }), _jsxs(Text, {\n            style: styles.statValue,\n            children: [((energyStats == null ? void 0 : energyStats.total_consumption_kwh) || 0).toFixed(1), _jsx(Text, {\n              style: styles.statUnit,\n              children: \"kWh\"\n            })]\n          })]\n        }), _jsxs(View, {\n          style: styles.statCard,\n          children: [_jsx(Text, {\n            style: styles.statLabel,\n            children: \"Energy Saved\"\n          }), _jsxs(Text, {\n            style: styles.statValue,\n            children: [((energyStats == null ? void 0 : energyStats.estimated_savings_kwh) || 0).toFixed(1), _jsx(Text, {\n              style: styles.statUnit,\n              children: \"kWh\"\n            })]\n          })]\n        })]\n      }), _jsxs(View, {\n        style: styles.consumptionCard,\n        children: [_jsx(Text, {\n          style: styles.consumptionTitle,\n          children: \"Today's Consumption\"\n        }), _jsx(View, {\n          style: {\n            height: 120,\n            marginTop: 12\n          },\n          children: _jsxs(Svg, {\n            width: \"100%\",\n            height: \"100%\",\n            viewBox: \"0 0 350 120\",\n            children: [_jsx(Defs, {\n              children: _jsxs(SvgLinearGradient, {\n                id: \"chartGrad\",\n                x1: \"0\",\n                y1: \"0\",\n                x2: \"0\",\n                y2: \"1\",\n                children: [_jsx(Stop, {\n                  offset: \"0\",\n                  stopColor: \"#FFFFFF\",\n                  stopOpacity: \"0.4\"\n                }), _jsx(Stop, {\n                  offset: \"1\",\n                  stopColor: \"#FFFFFF\",\n                  stopOpacity: \"0.02\"\n                })]\n              })\n            }), _jsx(Path, {\n              d: generateAreaPath(hourlyData.map(function (h) {\n                return h.consumption_kwh;\n              }), 350, 120),\n              fill: \"url(#chartGrad)\"\n            }), _jsx(Path, {\n              d: generateLinePath(hourlyData.map(function (h) {\n                return h.consumption_kwh;\n              }), 350, 120),\n              stroke: \"#FFFFFF\",\n              strokeWidth: 3,\n              fill: \"none\",\n              strokeLinecap: \"round\",\n              strokeLinejoin: \"round\"\n            })]\n          })\n        }), _jsx(View, {\n          style: styles.timeLabels,\n          children: hourlyData.filter(function (_, i) {\n            return i % 4 === 0;\n          }).slice(0, 6).map(function (h) {\n            return _jsxs(Text, {\n              style: styles.timeLabel,\n              children: [h.hour, \":00\"]\n            }, h.hour);\n          })\n        })]\n      }), _jsx(View, {\n        style: styles.sectionHeader,\n        children: _jsx(Text, {\n          style: styles.sectionTitle,\n          children: \"Lights\"\n        })\n      }), _jsx(View, {\n        style: styles.lightsCard,\n        children: lights.length === 0 ? _jsx(Text, {\n          style: {\n            color: '#666',\n            textAlign: 'center',\n            padding: 20\n          },\n          children: \"No lights found\"\n        }) : _jsx(View, {\n          style: styles.lightsGrid,\n          children: lights.slice(0, 4).map(function (light) {\n            return _jsxs(View, {\n              style: styles.lightItem,\n              children: [_jsxs(View, {\n                children: [_jsx(Text, {\n                  style: styles.lightName,\n                  children: light.name\n                }), _jsxs(Text, {\n                  style: styles.lightSub,\n                  children: [(light.power_consumption_watts / 1000).toFixed(1), \" kW/h\"]\n                })]\n              }), _jsx(Switch, {\n                value: light.is_on,\n                onValueChange: function onValueChange() {\n                  return toggleLight(light.id);\n                },\n                trackColor: {\n                  false: '#e0e0e0',\n                  true: '#FFFFFF'\n                },\n                thumbColor: \"#78B85E\"\n              })]\n            }, light.id);\n          })\n        })\n      }), _jsx(View, {\n        style: styles.sectionHeader,\n        children: _jsx(Text, {\n          style: styles.sectionTitle,\n          children: \"Routines\"\n        })\n      }), _jsx(View, {\n        style: styles.routinesCard,\n        children: routines.length === 0 ? _jsx(Text, {\n          style: {\n            color: '#666',\n            textAlign: 'center',\n            padding: 20\n          },\n          children: \"No routines found\"\n        }) : _jsx(View, {\n          style: styles.routineRow,\n          children: routines.slice(0, 4).map(function (r) {\n            return _jsx(TouchableOpacity, {\n              onPress: function onPress() {\n                return setActiveRoutine(function (prev) {\n                  return prev === r.name ? null : r.name;\n                });\n              },\n              style: [styles.routineButton, (activeRoutine === r.name || r.is_active) && styles.routineActive],\n              children: _jsx(Text, {\n                style: [styles.routineText, (activeRoutine === r.name || r.is_active) && styles.routineTextActive],\n                children: r.name\n              })\n            }, r.id);\n          })\n        })\n      }), _jsxs(View, {\n        style: styles.houseButtons,\n        children: [_jsx(TouchableOpacity, {\n          style: styles.houseButton,\n          children: _jsx(Text, {\n            style: styles.houseButtonText,\n            children: \"+ Add House\"\n          })\n        }), _jsx(TouchableOpacity, {\n          style: styles.houseButton,\n          children: _jsx(Text, {\n            style: styles.houseButtonText,\n            children: \"Edit House\"\n          })\n        })]\n      })]\n    })\n  });\n};\nfunction generateLinePath(data, width, height) {\n  if (!data || data.length === 0) return '';\n  var step = width / (data.length - 1);\n  var max = Math.max.apply(Math, _toConsumableArray(data));\n  var min = Math.min.apply(Math, _toConsumableArray(data));\n  var range = max - min || 1;\n  return data.map(function (d, i) {\n    var x = i * step;\n    var y = height - (d - min) / range * (height - 20) - 10;\n    return (i === 0 ? 'M' : 'L') + \" \" + x.toFixed(2) + \" \" + y.toFixed(2);\n  }).join(' ');\n}\nfunction generateAreaPath(data, width, height) {\n  var line = generateLinePath(data, width, height);\n  if (!line) return '';\n  return line + \" L \" + width + \" \" + height + \" L 0 \" + height + \" Z\";\n}\nexport default DashboardScreen;","map":{"version":3,"names":["React","useState","useEffect","View","Text","Switch","ScrollView","TouchableOpacity","Image","ActivityIndicator","Alert","Svg","Path","Defs","LinearGradient","SvgLinearGradient","Stop","PROFILE_PLACEHOLDER","styles","energyService","lightsService","routinesService","useApp","jsx","_jsx","jsxs","_jsxs","DashboardScreen","_useApp","currentHouse","_useState","_useState2","_slicedToArray","lights","setLights","_useState3","_useState4","energyStats","setEnergyStats","_useState5","_useState6","hourlyData","setHourlyData","_useState7","_useState8","routines","setRoutines","_useState9","_useState0","activeRoutine","setActiveRoutine","_useState1","_useState10","loading","setLoading","loadDashboardData","_ref","_asyncToGenerator","_yield$Promise$all","Promise","all","getCurrentStats","id","getHourlyConsumption","getLightsByHouse","getRoutinesByHouse","_yield$Promise$all2","statsData","hourlyDataResult","lightsData","routinesData","error","console","alert","apply","arguments","toggleLight","_ref2","lightId","light","find","l","map","_objectSpread","is_on","_x","colors","style","container","children","flex","justifyContent","alignItems","size","color","contentContainerStyle","scrollContent","blobContainer","blob","top","left","right","bottom","glassHeader","headerContent","width","height","viewBox","fill","d","stroke","strokeWidth","strokeLinecap","strokeLinejoin","titleContainer","headerTitle","divider","profilePicture","source","uri","profileImage","houseId","statsSection","statCard","statLabel","statValue","lights_on","total_consumption_kwh","toFixed","statUnit","estimated_savings_kwh","consumptionCard","consumptionTitle","marginTop","x1","y1","x2","y2","offset","stopColor","stopOpacity","generateAreaPath","h","consumption_kwh","generateLinePath","timeLabels","filter","_","i","slice","timeLabel","hour","sectionHeader","sectionTitle","lightsCard","length","textAlign","padding","lightsGrid","lightItem","lightName","name","lightSub","power_consumption_watts","value","onValueChange","trackColor","false","true","thumbColor","routinesCard","routineRow","r","onPress","prev","routineButton","is_active","routineActive","routineText","routineTextActive","houseButtons","houseButton","houseButtonText","data","step","max","Math","_toConsumableArray","min","range","x","y","join","line"],"sources":["C:/Users/Seele/Documents/ESMAD/Computação Móvel e Ubíqua/New Voltzy/NewVoltzy/src/screens/DashboardScreen.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { View, Text, Switch, ScrollView, TouchableOpacity, Image, ActivityIndicator, Alert } from 'react-native';\r\nimport Svg, { Path, Defs, LinearGradient as SvgLinearGradient, Stop } from 'react-native-svg';\r\nimport { LinearGradient } from 'expo-linear-gradient';\r\nimport { PROFILE_PLACEHOLDER } from '../data/mockData';\r\nimport styles from '../styles/dashboardStyles';\r\nimport { energyService } from '../services/energyService';\r\nimport { lightsService } from '../services/lightsService';\r\nimport { routinesService } from '../services/routinesService';\r\nimport { useApp } from '../contexts/AppContext';\r\n\r\ninterface Light {\r\n  id: number;\r\n  name: string;\r\n  room_name: string;\r\n  is_on: boolean;\r\n  power_consumption_watts: number;\r\n}\r\n\r\ninterface EnergyStats {\r\n  total_lights: number;\r\n  lights_on: number;\r\n  total_consumption_kwh: number;\r\n  estimated_savings_kwh: number;\r\n}\r\n\r\ninterface HourlyData {\r\n  hour: number;\r\n  consumption_kwh: number;\r\n}\r\n\r\nconst DashboardScreen: React.FC = () => {\r\n  const { currentHouse } = useApp();\r\n  const [lights, setLights] = useState<Light[]>([]);\r\n  const [energyStats, setEnergyStats] = useState<EnergyStats | null>(null);\r\n  const [hourlyData, setHourlyData] = useState<HourlyData[]>([]);\r\n  const [routines, setRoutines] = useState<any[]>([]);\r\n  const [activeRoutine, setActiveRoutine] = useState<string | null>(null);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    loadDashboardData();\r\n  }, [currentHouse]);\r\n\r\n  const loadDashboardData = async () => {\r\n    if (!currentHouse) return;\r\n    try {\r\n      setLoading(true);\r\n      const [statsData, hourlyDataResult, lightsData, routinesData] = await Promise.all([\r\n        energyService.getCurrentStats(currentHouse.id),\r\n        energyService.getHourlyConsumption(currentHouse.id),\r\n        lightsService.getLightsByHouse(currentHouse.id),\r\n        routinesService.getRoutinesByHouse(currentHouse.id),\r\n      ]);\r\n      setEnergyStats(statsData);\r\n      setHourlyData(hourlyDataResult);\r\n      setLights(lightsData);\r\n      setRoutines(routinesData);\r\n    } catch (error: any) {\r\n      console.error('Failed to load dashboard data:', error);\r\n      Alert.alert('Error', 'Failed to load dashboard data');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const toggleLight = async (lightId: number) => {\r\n    try {\r\n      const light = lights.find(l => l.id === lightId);\r\n      if (!light) return;\r\n      await lightsService.toggleLight(lightId);\r\n      setLights(lights.map(l => l.id === lightId ? { ...l, is_on: !l.is_on } : l));\r\n      // Reload stats after toggling\r\n      if (currentHouse) {\r\n        const statsData = await energyService.getCurrentStats(currentHouse.id);\r\n        setEnergyStats(statsData);\r\n      }\r\n    } catch (error: any) {\r\n      console.error('Failed to toggle light:', error);\r\n      Alert.alert('Error', 'Failed to toggle light');\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <LinearGradient colors={['#78B85E', '#1E7B45']} style={styles.container}>\r\n        <View style={{ flex: 1, justifyContent: 'center', alignItems: 'center' }}>\r\n          <ActivityIndicator size=\"large\" color=\"#FFFFFF\" />\r\n        </View>\r\n      </LinearGradient>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <LinearGradient colors={['#78B85E', '#1E7B45']} style={styles.container}>\r\n      <ScrollView contentContainerStyle={styles.scrollContent}>\r\n        {/* Decorative Blobs - Simplified */}\r\n        <View style={styles.blobContainer}>\r\n          <View style={[styles.blob, { top: 100, left: -50 }]} />\r\n          <View style={[styles.blob, { top: 300, right: -30 }]} />\r\n          <View style={[styles.blob, { bottom: 100, left: 20 }]} />\r\n        </View>\r\n        {/* Glassmorphism Header */}\r\n        <View style={styles.glassHeader}>\r\n          <View style={styles.headerContent}>\r\n            {/* Home Icon */}\r\n            <Svg width={47} height={47} viewBox=\"0 0 47 47\" fill=\"none\">\r\n              <Path\r\n                d=\"M17.625 43.0832V23.4998H29.375V43.0832M5.875 17.6248L23.5 3.9165L41.125 17.6248V39.1665C41.125 40.2053 40.7124 41.2015 39.9778 41.936C39.2433 42.6705 38.2471 43.0832 37.2083 43.0832H9.79167C8.7529 43.0832 7.75668 42.6705 7.02216 41.936C6.28765 41.2015 5.875 40.2053 5.875 39.1665V17.6248Z\"\r\n                stroke=\"#F3F3F3\"\r\n                strokeWidth=\"2\"\r\n                strokeLinecap=\"round\"\r\n                strokeLinejoin=\"round\"\r\n              />\r\n            </Svg>\r\n\r\n            {/* Title Section */}\r\n            <View style={styles.titleContainer}>\r\n              <Text style={styles.headerTitle}>Dashboard</Text>\r\n              <View style={styles.divider} />\r\n            </View>\r\n\r\n            {/* Profile Picture */}\r\n            <View style={styles.profilePicture}>\r\n              <Image\r\n                source={{ uri: PROFILE_PLACEHOLDER }}\r\n                style={styles.profileImage}\r\n              />\r\n            </View>\r\n          </View>\r\n\r\n          {/* House ID */}\r\n          <Text style={styles.houseId}>House 1</Text>\r\n        </View>\r\n\r\n        {/* Stats Cards */}\r\n        <View style={styles.statsSection}>\r\n          <View style={styles.statCard}>\r\n            <Text style={styles.statLabel}>Lights on</Text>\r\n            <Text style={styles.statValue}>{energyStats?.lights_on || 0}</Text>\r\n          </View>\r\n          <View style={styles.statCard}>\r\n            <Text style={styles.statLabel}>Energy Used</Text>\r\n            <Text style={styles.statValue}>{(energyStats?.total_consumption_kwh || 0).toFixed(1)}<Text style={styles.statUnit}>kWh</Text></Text>\r\n          </View>\r\n          <View style={styles.statCard}>\r\n            <Text style={styles.statLabel}>Energy Saved</Text>\r\n            <Text style={styles.statValue}>{(energyStats?.estimated_savings_kwh || 0).toFixed(1)}<Text style={styles.statUnit}>kWh</Text></Text>\r\n          </View>\r\n        </View>\r\n\r\n        {/* Consumption Chart */}\r\n        <View style={styles.consumptionCard}>\r\n          <Text style={styles.consumptionTitle}>Today's Consumption</Text>\r\n          <View style={{ height: 120, marginTop: 12 }}>\r\n            <Svg width=\"100%\" height=\"100%\" viewBox=\"0 0 350 120\">\r\n              <Defs>\r\n                <SvgLinearGradient id=\"chartGrad\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\r\n                  <Stop offset=\"0\" stopColor=\"#FFFFFF\" stopOpacity=\"0.4\" />\r\n                  <Stop offset=\"1\" stopColor=\"#FFFFFF\" stopOpacity=\"0.02\" />\r\n                </SvgLinearGradient>\r\n              </Defs>\r\n              <Path d={generateAreaPath(hourlyData.map(h => h.consumption_kwh), 350, 120)} fill=\"url(#chartGrad)\" />\r\n              <Path d={generateLinePath(hourlyData.map(h => h.consumption_kwh), 350, 120)} stroke=\"#FFFFFF\" strokeWidth={3} fill=\"none\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\r\n            </Svg>\r\n          </View>\r\n          <View style={styles.timeLabels}>\r\n            {hourlyData.filter((_, i) => i % 4 === 0).slice(0, 6).map(h => (\r\n              <Text key={h.hour} style={styles.timeLabel}>{h.hour}:00</Text>\r\n            ))}\r\n          </View>\r\n        </View>\r\n\r\n        {/* Lights Section */}\r\n        <View style={styles.sectionHeader}>\r\n          <Text style={styles.sectionTitle}>Lights</Text>\r\n        </View>\r\n        <View style={styles.lightsCard}>\r\n          {lights.length === 0 ? (\r\n            <Text style={{ color: '#666', textAlign: 'center', padding: 20 }}>No lights found</Text>\r\n          ) : (\r\n            <View style={styles.lightsGrid}>\r\n              {lights.slice(0, 4).map((light) => (\r\n                <View key={light.id} style={styles.lightItem}>\r\n                  <View>\r\n                    <Text style={styles.lightName}>{light.name}</Text>\r\n                    <Text style={styles.lightSub}>{(light.power_consumption_watts / 1000).toFixed(1)} kW/h</Text>\r\n                  </View>\r\n                  <Switch\r\n                    value={light.is_on}\r\n                    onValueChange={() => toggleLight(light.id)}\r\n                    trackColor={{ false: '#e0e0e0', true: '#FFFFFF' }}\r\n                    thumbColor=\"#78B85E\"\r\n                  />\r\n                </View>\r\n              ))}\r\n            </View>\r\n          )}\r\n        </View>\r\n\r\n        {/* Routines Section */}\r\n        <View style={styles.sectionHeader}>\r\n          <Text style={styles.sectionTitle}>Routines</Text>\r\n        </View>\r\n        <View style={styles.routinesCard}>\r\n          {routines.length === 0 ? (\r\n            <Text style={{ color: '#666', textAlign: 'center', padding: 20 }}>No routines found</Text>\r\n          ) : (\r\n            <View style={styles.routineRow}>\r\n              {routines.slice(0, 4).map(r => (\r\n                <TouchableOpacity \r\n                  key={r.id} \r\n                  onPress={() => setActiveRoutine(prev => prev === r.name ? null : r.name)}\r\n                  style={[styles.routineButton, (activeRoutine === r.name || r.is_active) && styles.routineActive]}\r\n                >\r\n                  <Text style={[styles.routineText, (activeRoutine === r.name || r.is_active) && styles.routineTextActive]}>{r.name}</Text>\r\n                </TouchableOpacity>\r\n              ))}\r\n            </View>\r\n          )}\r\n        </View>\r\n\r\n        {/* House Action Buttons */}\r\n        <View style={styles.houseButtons}>\r\n          <TouchableOpacity style={styles.houseButton}>\r\n            <Text style={styles.houseButtonText}>+ Add House</Text>\r\n          </TouchableOpacity>\r\n          <TouchableOpacity style={styles.houseButton}>\r\n            <Text style={styles.houseButtonText}>Edit House</Text>\r\n          </TouchableOpacity>\r\n        </View>\r\n      </ScrollView>\r\n    </LinearGradient>\r\n  );\r\n};\r\n\r\n// Helper functions for chart\r\nfunction generateLinePath(data: number[], width: number, height: number) {\r\n  if (!data || data.length === 0) return '';\r\n  const step = width / (data.length - 1);\r\n  const max = Math.max(...data);\r\n  const min = Math.min(...data);\r\n  const range = max - min || 1;\r\n  return data.map((d, i) => {\r\n    const x = i * step;\r\n    const y = height - ((d - min) / range) * (height - 20) - 10;\r\n    return `${i === 0 ? 'M' : 'L'} ${x.toFixed(2)} ${y.toFixed(2)}`;\r\n  }).join(' ');\r\n}\r\n\r\nfunction generateAreaPath(data: number[], width: number, height: number) {\r\n  const line = generateLinePath(data, width, height);\r\n  if (!line) return '';\r\n  return `${line} L ${width} ${height} L 0 ${height} Z`;\r\n}\r\n\r\nexport default DashboardScreen;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}