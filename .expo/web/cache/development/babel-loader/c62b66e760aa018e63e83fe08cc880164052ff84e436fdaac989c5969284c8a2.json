{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport { apiClient } from \"./api\";\nvar HousesService = function () {\n  function HousesService() {\n    _classCallCheck(this, HousesService);\n  }\n  return _createClass(HousesService, [{\n    key: \"getHouses\",\n    value: function () {\n      var _getHouses = _asyncToGenerator(function* () {\n        var response = yield apiClient.get('/api/houses');\n        return response.houses;\n      });\n      function getHouses() {\n        return _getHouses.apply(this, arguments);\n      }\n      return getHouses;\n    }()\n  }, {\n    key: \"createHouse\",\n    value: function () {\n      var _createHouse = _asyncToGenerator(function* (data) {\n        var response = yield apiClient.post('/api/houses', data);\n        return response.house;\n      });\n      function createHouse(_x) {\n        return _createHouse.apply(this, arguments);\n      }\n      return createHouse;\n    }()\n  }, {\n    key: \"getRooms\",\n    value: function () {\n      var _getRooms = _asyncToGenerator(function* (houseId) {\n        var response = yield apiClient.get(\"/api/houses/\" + houseId + \"/rooms\");\n        return response.rooms;\n      });\n      function getRooms(_x2) {\n        return _getRooms.apply(this, arguments);\n      }\n      return getRooms;\n    }()\n  }, {\n    key: \"getRoomNames\",\n    value: function () {\n      var _getRoomNames = _asyncToGenerator(function* (houseId) {\n        try {\n          var lights = yield apiClient.get(\"/api/houses/\" + houseId + \"/lights\");\n          var roomNames = _toConsumableArray(new Set(lights.lights.map(function (light) {\n            return light.room_name;\n          })));\n          return roomNames.filter(Boolean);\n        } catch (error) {\n          console.error('Failed to fetch room names:', error);\n          return [];\n        }\n      });\n      function getRoomNames(_x3) {\n        return _getRoomNames.apply(this, arguments);\n      }\n      return getRoomNames;\n    }()\n  }, {\n    key: \"createRoom\",\n    value: function () {\n      var _createRoom = _asyncToGenerator(function* (houseId, data) {\n        var response = yield apiClient.post(\"/api/houses/\" + houseId + \"/rooms\", data);\n        return response.room;\n      });\n      function createRoom(_x4, _x5) {\n        return _createRoom.apply(this, arguments);\n      }\n      return createRoom;\n    }()\n  }]);\n}();\nexport var housesService = new HousesService();","map":{"version":3,"names":["apiClient","HousesService","_classCallCheck","_createClass","key","value","_getHouses","_asyncToGenerator","response","get","houses","getHouses","apply","arguments","_createHouse","data","post","house","createHouse","_x","_getRooms","houseId","rooms","getRooms","_x2","_getRoomNames","lights","roomNames","_toConsumableArray","Set","map","light","room_name","filter","Boolean","error","console","getRoomNames","_x3","_createRoom","room","createRoom","_x4","_x5","housesService"],"sources":["C:/Users/Seele/Documents/ESMAD/Computação Móvel e Ubíqua/New Voltzy/NewVoltzy/src/services/housesService.ts"],"sourcesContent":["import { apiClient } from './api';\r\n\r\nexport interface House {\r\n  id: number;\r\n  name: string;\r\n  address?: string;\r\n  contracted_power_kva?: number;\r\n  has_upac?: boolean;\r\n  upac_power_kw?: number;\r\n  created_at?: string;\r\n}\r\n\r\nexport interface Room {\r\n  id: number;\r\n  name: string;\r\n  house_id?: number;\r\n  created_at?: string;\r\n}\r\n\r\nexport interface CreateHouseData {\r\n  name: string;\r\n  address?: string;\r\n  contracted_power_kva?: number;\r\n  has_upac?: boolean;\r\n  upac_power_kw?: number;\r\n}\r\n\r\nexport interface CreateRoomData {\r\n  name: string;\r\n}\r\n\r\nclass HousesService {\r\n  // Get all houses for the current user\r\n  async getHouses(): Promise<House[]> {\r\n    const response = await apiClient.get<{ houses: House[] }>('/api/houses');\r\n    return response.houses;\r\n  }\r\n\r\n  // Create a new house\r\n  async createHouse(data: CreateHouseData): Promise<House> {\r\n    const response = await apiClient.post<{ house: House }>('/api/houses', data);\r\n    return response.house;\r\n  }\r\n\r\n  // Get all rooms in a house\r\n  async getRooms(houseId: number): Promise<Room[]> {\r\n    const response = await apiClient.get<{ rooms: Room[] }>(`/api/houses/${houseId}/rooms`);\r\n    return response.rooms;\r\n  }\r\n\r\n  // Get unique room names from lights (alternative to rooms table)\r\n  async getRoomNames(houseId: number): Promise<string[]> {\r\n    try {\r\n      const lights = await apiClient.get<{ lights: any[] }>(`/api/houses/${houseId}/lights`);\r\n      const roomNames = [...new Set(lights.lights.map((light: any) => light.room_name))];\r\n      return roomNames.filter(Boolean) as string[];\r\n    } catch (error) {\r\n      console.error('Failed to fetch room names:', error);\r\n      return [];\r\n    }\r\n  }\r\n\r\n  // Create a new room\r\n  async createRoom(houseId: number, data: CreateRoomData): Promise<Room> {\r\n    const response = await apiClient.post<{ room: Room }>(`/api/houses/${houseId}/rooms`, data);\r\n    return response.room;\r\n  }\r\n}\r\n\r\nexport const housesService = new HousesService();\r\n"],"mappings":";;;;AAAA,SAASA,SAAS;AAAgB,IA+B5BC,aAAa;EAAA,SAAAA,cAAA;IAAAC,eAAA,OAAAD,aAAA;EAAA;EAAA,OAAAE,YAAA,CAAAF,aAAA;IAAAG,GAAA;IAAAC,KAAA;MAAA,IAAAC,UAAA,GAAAC,iBAAA,CAEjB,aAAoC;QAClC,IAAMC,QAAQ,SAASR,SAAS,CAACS,GAAG,CAAsB,aAAa,CAAC;QACxE,OAAOD,QAAQ,CAACE,MAAM;MACxB,CAAC;MAAA,SAHKC,SAASA,CAAA;QAAA,OAAAL,UAAA,CAAAM,KAAA,OAAAC,SAAA;MAAA;MAAA,OAATF,SAAS;IAAA;EAAA;IAAAP,GAAA;IAAAC,KAAA;MAAA,IAAAS,YAAA,GAAAP,iBAAA,CAMf,WAAkBQ,IAAqB,EAAkB;QACvD,IAAMP,QAAQ,SAASR,SAAS,CAACgB,IAAI,CAAmB,aAAa,EAAED,IAAI,CAAC;QAC5E,OAAOP,QAAQ,CAACS,KAAK;MACvB,CAAC;MAAA,SAHKC,WAAWA,CAAAC,EAAA;QAAA,OAAAL,YAAA,CAAAF,KAAA,OAAAC,SAAA;MAAA;MAAA,OAAXK,WAAW;IAAA;EAAA;IAAAd,GAAA;IAAAC,KAAA;MAAA,IAAAe,SAAA,GAAAb,iBAAA,CAMjB,WAAec,OAAe,EAAmB;QAC/C,IAAMb,QAAQ,SAASR,SAAS,CAACS,GAAG,kBAAmCY,OAAO,WAAQ,CAAC;QACvF,OAAOb,QAAQ,CAACc,KAAK;MACvB,CAAC;MAAA,SAHKC,QAAQA,CAAAC,GAAA;QAAA,OAAAJ,SAAA,CAAAR,KAAA,OAAAC,SAAA;MAAA;MAAA,OAARU,QAAQ;IAAA;EAAA;IAAAnB,GAAA;IAAAC,KAAA;MAAA,IAAAoB,aAAA,GAAAlB,iBAAA,CAMd,WAAmBc,OAAe,EAAqB;QACrD,IAAI;UACF,IAAMK,MAAM,SAAS1B,SAAS,CAACS,GAAG,kBAAmCY,OAAO,YAAS,CAAC;UACtF,IAAMM,SAAS,GAAAC,kBAAA,CAAO,IAAIC,GAAG,CAACH,MAAM,CAACA,MAAM,CAACI,GAAG,CAAC,UAACC,KAAU;YAAA,OAAKA,KAAK,CAACC,SAAS;UAAA,EAAC,CAAC,CAAC;UAClF,OAAOL,SAAS,CAACM,MAAM,CAACC,OAAO,CAAC;QAClC,CAAC,CAAC,OAAOC,KAAK,EAAE;UACdC,OAAO,CAACD,KAAK,CAAC,6BAA6B,EAAEA,KAAK,CAAC;UACnD,OAAO,EAAE;QACX;MACF,CAAC;MAAA,SATKE,YAAYA,CAAAC,GAAA;QAAA,OAAAb,aAAA,CAAAb,KAAA,OAAAC,SAAA;MAAA;MAAA,OAAZwB,YAAY;IAAA;EAAA;IAAAjC,GAAA;IAAAC,KAAA;MAAA,IAAAkC,WAAA,GAAAhC,iBAAA,CAYlB,WAAiBc,OAAe,EAAEN,IAAoB,EAAiB;QACrE,IAAMP,QAAQ,SAASR,SAAS,CAACgB,IAAI,kBAAgCK,OAAO,aAAUN,IAAI,CAAC;QAC3F,OAAOP,QAAQ,CAACgC,IAAI;MACtB,CAAC;MAAA,SAHKC,UAAUA,CAAAC,GAAA,EAAAC,GAAA;QAAA,OAAAJ,WAAA,CAAA3B,KAAA,OAAAC,SAAA;MAAA;MAAA,OAAV4B,UAAU;IAAA;EAAA;AAAA;AAMlB,OAAO,IAAMG,aAAa,GAAG,IAAI3C,aAAa,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}